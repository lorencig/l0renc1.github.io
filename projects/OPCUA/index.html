<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> UA OPC Python Interface | Lorenci Gjurgjaj </title> <meta name="author" content="Lorenci Gjurgjaj"> <meta name="description" content="This platform provides a versatile and user-friendly interface for controlling laboratory pumps via OPC UA protocol. Pumps are a critical component in fluidic systems, especially in laboratory-scale applications where precise control of fluid flow is essential. This application is specifically tailored for such applications, allowing users to automate and monitor the operation of pumps with ease and accuracy. The user can create and execute a sequence of actions for the pumps in a defined order."> <meta name="keywords" content="lorenci gjurgjaj, istituto italiano di tecnologia, akademia ivodent, the open university, PhD nanochemistry, academic-website, portfolio-website,"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://lorencig.github.io/projects/OPCUA/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Lorenci</span> Gjurgjaj </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">homepage </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">UA OPC Python Interface</h1> <p class="post-description">This platform provides a versatile and user-friendly interface for controlling laboratory pumps via OPC UA protocol. Pumps are a critical component in fluidic systems, especially in laboratory-scale applications where precise control of fluid flow is essential. This application is specifically tailored for such applications, allowing users to automate and monitor the operation of pumps with ease and accuracy. The user can create and execute a sequence of actions for the pumps in a defined order.</p> </header> <article> <style>.hidden-reference{display:none}</style> <p><a href="https://zenodo.org/doi/10.5281/zenodo.12794838" rel="external nofollow noopener" target="_blank"><img src="https://zenodo.org/badge/832139320.svg" alt="DOI"></a></p> <p><a href="https://app.codacy.com/gh/lorencig/UA-OPC-Interface/dashboard?utm_source=gh&amp;utm_medium=referral&amp;utm_content=&amp;utm_campaign=Badge_grade" rel="external nofollow noopener" target="_blank"><img src="https://app.codacy.com/project/badge/Grade/1c6c7dbfc3414deda1b6bbf6c201cf36" alt="Codacy Badge"></a></p> <h1 id="overview---ua-opc-interface">Overview - UA OPC Interface</h1> <p>This application provides a graphical interface to control pumps connected to an OPC UA server. The user can create and execute a sequence of actions for the pumps in a defined order.</p> <h2 id="features">Features</h2> <ul> <li>Connect to an OPC UA server.</li> <li>Add actions to the program to control the pumps (pump, fill, empty, stop).</li> <li>Define time intervals between actions.</li> <li>Execute the program and monitor the status and elapsed time.</li> <li>Clear the program and start over.</li> </ul> <h2 id="default-opc-ua-configuration">Default OPC UA Configuration</h2> <ul> <li> <strong>Client:</strong> <code class="language-plaintext highlighter-rouge">opc.tcp://localhost:4840/</code> </li> <li> <strong>Pump Nodes:</strong> <ul> <li>Pump A: <code class="language-plaintext highlighter-rouge">ns=1;i=1001</code> </li> <li>Pump B: <code class="language-plaintext highlighter-rouge">ns=1;i=1002</code> </li> </ul> </li> <li> <strong>Method Nodes:</strong> <ul> <li>Pump: <code class="language-plaintext highlighter-rouge">ns=2;i=2001</code> </li> <li>Stop: <code class="language-plaintext highlighter-rouge">ns=2;i=2002</code> </li> <li>Empty: <code class="language-plaintext highlighter-rouge">ns=2;i=2003</code> </li> <li>Fill: <code class="language-plaintext highlighter-rouge">ns=2;i=2004</code> </li> </ul> </li> </ul> <h2 id="method-inputoutput-format">Method Input/Output Format</h2> <h3 id="pump-method">Pump Method</h3> <ul> <li> <strong>Input:</strong> <code class="language-plaintext highlighter-rouge">value</code> (type: UInt16, unit: μL/min)</li> <li> <strong>Output:</strong> None</li> </ul> <h3 id="stop-method">Stop Method</h3> <ul> <li> <strong>Input:</strong> None</li> <li> <strong>Output:</strong> None</li> </ul> <h3 id="empty-method">Empty Method</h3> <ul> <li> <strong>Input:</strong> <code class="language-plaintext highlighter-rouge">value</code> (type: UInt16, unit: μL/min)</li> <li> <strong>Output:</strong> None</li> </ul> <h3 id="fill-method">Fill Method</h3> <ul> <li> <strong>Input:</strong> <code class="language-plaintext highlighter-rouge">value</code> (type: UInt16, unit: μL/min)</li> <li> <strong>Output:</strong> None</li> </ul> <h2 id="how-the-program-works">How the Program Works</h2> <h3 id="logic-overview">Logic Overview</h3> <p>The program allows users to create a sequence of actions for two pumps (Pump A and Pump B) connected to an OPC UA server. These actions can be executed in the order they were added, and the program will handle the execution and timing of each action.</p> <h3 id="main-components">Main Components</h3> <ul> <li> <strong>Program Table:</strong> Displays the list of actions added by the user. Each action includes the step number, action type, pump (A or B), and value.</li> <li> <strong>Action Buttons:</strong> Allow users to add different actions (Pump, Fill, Empty, Stop) for each pump and a time interval between actions.</li> <li> <strong>Control Buttons:</strong> Include buttons to submit (execute) the program, clear the program, and monitor the execution status and elapsed time.</li> </ul> <h3 id="adding-actions">Adding Actions</h3> <ol> <li> <strong>Pump:</strong> Prompts the user to enter a value (1-1000 μL/min) and adds a “Pump” action to the program.</li> <li> <strong>Fill:</strong> Prompts the user to enter a value (1-1000 μL/min) and adds a “Fill” action to the program.</li> <li> <strong>Empty:</strong> Prompts the user to enter a value (1-1000 μL/min) and adds an “Empty” action to the program.</li> <li> <strong>Stop:</strong> Adds a “Stop” action to the program.</li> <li> <strong>Time Interval:</strong> Prompts the user to enter a time interval (seconds) and adds a “Sleep” action to the program.</li> </ol> <h3 id="executing-the-program">Executing the Program</h3> <p>When the user clicks the “Submit” button, the program starts executing the actions in the order they were added. The status label updates to show the current action being executed, and the timer label displays the elapsed time. The program handles each action as follows:</p> <ol> <li> <strong>Pump, Fill, Empty:</strong> Calls the corresponding method on the selected pump node with the specified value.</li> <li> <strong>Stop:</strong> Calls the “Stop” method on the selected pump node.</li> <li> <strong>Sleep:</strong> Pauses execution for the specified time interval (seconds).</li> </ol> <h3 id="program-execution-flow">Program Execution Flow</h3> <ol> <li>The <code class="language-plaintext highlighter-rouge">execute_program</code> function starts the execution in a separate thread.</li> <li>The <code class="language-plaintext highlighter-rouge">run_program</code> function iterates through the actions in the program.</li> <li>For each action, the corresponding OPC UA method is called with the appropriate input values.</li> <li>If a “Sleep” action is encountered, the program pauses for the specified time interval.</li> <li>The status label and timer label are updated to reflect the current state of execution.</li> <li>The program continues until all actions are executed or a stop event is triggered.</li> </ol> <h2 id="example-usage">Example Usage</h2> <ol> <li>Add a “Pump” action for Pump A with a value of 500 μL/min.</li> <li>Add a “Fill” action for Pump B with a value of 300 μL/min.</li> <li>Add a time interval of 10 seconds.</li> <li>Add a “Stop” action for Pump A.</li> <li>Click “Submit” to execute the program.</li> </ol> <h2 id="prerequisites">Prerequisites</h2> <p>Before you begin, ensure you have met the following requirements:</p> <ul> <li>You have installed Python 3.6 or later.</li> <li>You have access to an OPC UA server.</li> <li>You have installed the necessary Python packages listed in <code class="language-plaintext highlighter-rouge">requirements.txt</code>.</li> </ul> <h2 id="installation">Installation</h2> <ol> <li> <p>Clone the repository:</p> <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> git clone https://github.com/lorencig/UA-OPC-Interface.git
 <span class="nb">cd </span>ua-opc-interface
</code></pre></div> </div> </li> <li> <p>Install the required Python packages:</p> <div class="language-shell highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt
</code></pre></div> </div> </li> </ol> <h2 id="files">Files</h2> <ul> <li> <code class="language-plaintext highlighter-rouge">main.py</code>: The main script to run the application.</li> <li> <code class="language-plaintext highlighter-rouge">requirements.txt</code>: List of Python packages required to run the application.</li> <li> <code class="language-plaintext highlighter-rouge">brain.png</code>: Application icon.</li> <li> <code class="language-plaintext highlighter-rouge">pump.png</code>, <code class="language-plaintext highlighter-rouge">stop.png</code>, <code class="language-plaintext highlighter-rouge">clean.png</code>, <code class="language-plaintext highlighter-rouge">empty.png</code>, <code class="language-plaintext highlighter-rouge">fill.png</code>, <code class="language-plaintext highlighter-rouge">time.png</code>, <code class="language-plaintext highlighter-rouge">submit.png</code>: Icons used in the GUI.</li> </ul> <h2 id="technologies--tools">Technologies &amp; Tools</h2> <ul> <li><a href="https://www.python.org/" rel="external nofollow noopener" target="_blank">Python</a></li> <li> <a href="https://docs.python.org/3/library/tkinter.html" rel="external nofollow noopener" target="_blank">Tkinter</a> - Standard GUI toolkit for Python.</li> <li> <a href="https://ttkbootstrap.readthedocs.io/en/latest/" rel="external nofollow noopener" target="_blank">ttkbootstrap</a> - A theming extension for Tkinter.</li> <li> <a href="https://github.com/FreeOpcUa/python-opcua" rel="external nofollow noopener" target="_blank">python-opcua</a> - OPC UA implementation in Python.</li> </ul> <h2 id="license">License</h2> <p>This project is under Creative Commons Attribution license.</p> <h2 id="disclaimer">Disclaimer</h2> <p>This software is separated from the author’s research and activity roles at their institutions.</p> <hr> <p><span class="hidden-reference"><a class="citation" href="#gjurgjaj2024opcua">(Gjurgjaj, 2024)</a></span></p> </article> <h2>References</h2> <div class="publications"> <h2 class="bibliography">2024</h2> <ol class="bibliography"><li> <div class="row"> <div class="col col-sm-2 abbr"> </div> <div id="gjurgjaj2024opcua" class="col-sm-8"> <div class="title">AU OPC Interface</div> <div class="author"> Lorenci Gjurgjaj </div> <div class="periodical"> <em>Zenodo</em>, 2024 </div> <div class="periodical"> </div> <div class="links"> </div> </div> </div> </li></ol> </div> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Lorenci Gjurgjaj. Last updated: July 23, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-GFQLY49M28"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GFQLY49M28");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>